"use server";

import { createCategory, deleteCategory, updateCategory, getCategories, CategoryFilter } from "./lib/categories-db";
import { revalidatePath } from "next/cache";
import { CategoriesComboProps } from "./components/comboBox";


// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________

export async function createCategoryAction({
    label,
    transactionCategory,
    incomeCategory,
    userId,
    path
}: {
    label: string;
    transactionCategory: boolean;
    incomeCategory: boolean;
    userId: string,
    path: string;
}) {
    await createCategory(label, transactionCategory, incomeCategory, userId);
    revalidatePath(path);
}

// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________

export async function updateCategoryAction(
    id: string,
    update: { label?: string; transactionCategory?: boolean; incomeCategory?: boolean; },
    path: string
) {
    await updateCategory(id, update);
    revalidatePath(path);
}

// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________


export async function deleteCategoryAction({
    id,
    path,
}: {
    id: string;
    path: string;
}) {
    await deleteCategory(id);
    revalidatePath(path);
}

// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________
// _________________________________________________________________________________________________________________________________________________________________________

export async function getCategoriesAction(filter: CategoryFilter) {
    // let filters: CategoryFilter = {
    //     type: "transaction",
    //     userId: userId
    // }
    const categories = await getCategories(filter);
    return (
        categories
    )
}